/* ====== Base (inspirado no visual clean da Apple) ====== */
:root {
  /* Paleta */
  --brand: rgb(144, 25, 235);
  --bot: rgb(240, 178, 111);         /* bolha do bot (laranja) */
  --user: rgb(202, 204, 237);        /* bolha do usuário */

  --bg: rgb(248, 249, 251);          /* fundo app */
  --card: rgb(255, 255, 255);        /* fundo cards */
  --text: rgb(23, 23, 23);
  --muted: rgb(120, 120, 120);
  --divider: rgb(236, 239, 243);
  --shadow: 0 10px 30px rgba(0,0,0,0.06);
  --radius: 16px;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: rgb(231, 231, 241);
    --card: rgb(36, 33, 36);
    --text: rgb(242, 242, 247);
    --muted: rgb(128, 128, 156);
    --divider: rgba(255,255,255,0.08);
    --shadow: 0 10px 30px rgba(0,0,0,0.5);
  }
}

html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Header minimalista com gradiente sutil */
.brand-gradient {
  background: linear-gradient(135deg, var(--brand), rgb(138, 92, 243));
  border: 0;
}

.shadow-soft { box-shadow: var(--shadow); }

/* ====== Layout do chat ====== */
.chat-wrapper { max-width: 900px; }
.chat-card {
  height: 80vh;
  display: flex;
  flex-direction: column;
  background: var(--card);
  border: none;
  border-radius: var(--radius);
  overflow: hidden;
}

@media (max-width: 576px) {
  .chat-card { height: calc(100vh - 128px); }
}

.chat-card .card-header {
  background: var(--card);
  border-bottom: 1px solid var(--divider);
  padding: 0.9rem 1rem;
}

.chat-log {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  background: var(--card);
}

/* Bolhas */
.msg {
  max-width: 75%;
  padding: .7rem .9rem;
  border-radius: 18px;
  position: relative;
  line-height: 1.35;
}
.msg + .msg { margin-top: .5rem; }
.msg .meta { font-size: .75rem; color: var(--muted); margin-top: .35rem; }

.msg.bot { background: var(--bot); border-top-left-radius: 6px; }
.msg.user { background: var(--user); border-top-right-radius: 6px; margin-left: auto; }

.bubble-row { display: flex; }
.bubble-row.bot { justify-content: flex-start; }
.bubble-row.user { justify-content: flex-end; }

/* Input fixo/sticky com efeito vítreo sutil */
.chat-input {
  background: rgba(255, 255, 255, 0.8);
  border-top: 1px solid var(--divider);
  position: sticky;
  bottom: 0;
  backdrop-filter: saturate(180%) blur(12px);
}
@media (prefers-color-scheme: dark) {
  .chat-input { background: rgba(28, 28, 30, 0.8); }
}

textarea#chatInput { resize: none; }
textarea#chatInput:focus { box-shadow: none; border-color: var(--brand); }

.btn-brand { background: var(--brand); color: #fff; border: none; }
.btn-brand:hover { filter: brightness(0.95); color:#fff; }
.btn-brand:focus { box-shadow: 0 0 0 0.25rem rgba(111,66,193,.25); }

/* Badges / dicas */
#modeBadge { font-weight: 600; }
#modeHint { color: var(--muted); }

/* Ajustes do modal */
.modal-content { background: var(--card); color: var(--text); }
.modal-header { border-bottom: 1px solid var(--divider); }
.modal-footer { border-top: 1px solid var(--divider); }

/* Scroll suave */
.chat-log { scroll-behavior: smooth; }